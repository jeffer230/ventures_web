<div class="container">
  <section>
    <h2>Tabla Eventos</h2>

    <!-- Bot贸n para abrir el modal de crear/editar -->
    <button class="btn btn-primary mb-3" (click)="openModal()">Crear Evento</button>

    <!-- Indicador de carga -->
    <div *ngIf="isLoading" class="text-center my-3">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <!-- Tabla de eventos -->
    <div class="table-responsive" *ngIf="!isLoading">
      <table class="table table-striped table-hover">
        <caption>Tabla Eventos</caption>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Fecha</th>
            <th>Municipio</th>
            <th>Direccion</th>
            <th>Descripci贸n</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let evento of eventos">
            <td>{{ evento.id }}</td>
            <td>{{ evento.nombre }}</td>
            <td>{{ evento.fecha }}</td>
            <td>{{ evento.id_municipio }}</td>
             <td>{{ evento.direccion }}</td>
            <td>{{ evento.descripcion }}</td>
            <td>
              <button type="button" class="btn btn-warning me-3" (click)="openModal(evento)">Editar</button>
              <button type="button" class="btn btn-danger" (click)="deleteEvento(evento.id)">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Mensaje si no hay datos -->
    <div *ngIf="!isLoading && eventos.length === 0" class="text-center">
      <p>No se encontraron eventos.</p>
    </div>

    <!-- Modal para crear/editar evento -->
    <div *ngIf="isModalOpen" class="modal-backdrop">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ modalEditar ? 'Editar Evento' : 'Crear Evento' }}</h5>
            <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
          </div>
          <form #form="ngForm" (ngSubmit)="modalEditar ? editarEvento(form) : crearEvento(form)" novalidate>
            <div class="modal-body">
              <div class="mb-3">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" id="nombre" class="form-control" name="nombre" [(ngModel)]="selectedEvento.nombre" required />
              </div>
              <div class="mb-3">
                <label for="descripcion" class="form-label">Descripci贸n</label>
                <input type="text" id="descripcion" class="form-control" name="descripcion" [(ngModel)]="selectedEvento.descripcion" required />
              </div>
              <div class="mb-3">
                <label for="fecha" class="form-label">Fecha</label>
                <input type="date" id="fecha" class="form-control" name="fecha" [(ngModel)]="selectedEvento.fecha" required />
              </div>
              <div class="mb-3">
                <label for="ubicacion" class="form-label">Ubicaci贸n</label>
                <input type="text" id="ubicacion" class="form-control" name="ubicacion" [(ngModel)]="selectedEvento.direccion" required />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancelar</button>
              <button type="submit" class="btn btn-primary">{{ modalEditar ? 'Guardar Cambios' : 'Crear Evento' }}</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>
